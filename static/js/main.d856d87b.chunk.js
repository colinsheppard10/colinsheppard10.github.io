(this.webpackJsonpabtest=this.webpackJsonpabtest||[]).push([[0],{34:function(e,t,n){"use strict";n.r(t);var r,c=n(1),i=n(0),s=n.n(i),a=n(15),o=n.n(a),u=n(3),d=n(22),j=n(9),l=n.n(j),f=n(16),h=n(2),v=n(12),x=n(11),b=function(e,t){var n=Object(h.a)(t.anchors,2),r=n[0],c=n[1];return function(e){var t=e.p1,n=e.p2;return t.y>n.y?0:100}({p1:e[r],p2:e[c]})},O=n(17);!function(e){e.BINARY="BINARY",e.ANGLE="ANGLE"}(r||(r={}));var m=function e(t){var n=t.name,r=t.anchors,c=t.angles,i=t.reps,s=t.type;Object(O.a)(this,e),this.anchors=void 0,this.angles=void 0,this.name=void 0,this.type=void 0,this.reps=void 0,this.name=n,this.anchors=r,this.angles=c,this.reps=i,this.type=s},p=[new m({name:"CURLS",anchors:[16,14,0],angles:[0,100],reps:3,type:r.BINARY}),new m({name:"PULL UP",anchors:[6,16,9],angles:[0,100],reps:3,type:r.BINARY}),new m({name:"SHR PRS",anchors:[16,0,0],angles:[0,100],reps:3,type:r.BINARY})],g=n(18),w=n.n(g),S=n(4);function y(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  font-size: 23vh;\n  font-weight: bold;\n  font-family: 'Dosis', sans-serif;\n"]);return y=function(){return e},e}function k(){var e=Object(u.a)(["\n  width: 100vw;\n  height: 93vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]);return k=function(){return e},e}var E=function(e){var t=e.repCompletionPercent,n=e.exerciseName,r=e.set,i=e.count,s=e.resetWorkout;return Object(c.jsxs)(C,{onClick:s,children:[Object(c.jsx)(w.a,{transitionDuration:".5s",completed:t}),Object(c.jsx)(R,{children:"S:".concat(r)}),Object(c.jsx)(R,{children:"R:".concat(i)}),Object(c.jsx)(R,{children:n})]})},C=S.a.div(k()),R=S.a.div(y());function I(){var e=Object(u.a)(["\n  text-align: center;\n  font-family: 'Dosis', sans-serif;\n  flex-grow: 1;\n"]);return I=function(){return e},e}function N(){var e=Object(u.a)(["\n  font-size: 5vh;\n  display: flex;\n"]);return N=function(){return e},e}function L(){var e=Object(u.a)(["\n  text-transform: uppercase;\n"]);return L=function(){return e},e}var F=function(){var e=Object(i.useState)(!1),t=Object(h.a)(e,2),n=t[0],r=t[1],s=Object(i.useState)(!1),a=Object(h.a)(s,2),o=a[0],u=a[1],j=Object(i.useRef)(null),O=Object(i.useRef)(null),m=Object(i.useRef)(null),g=Object(i.useState)({direction:0,count:0,set:0,exerciseSelectionIndex:-1,activeExercise:-1}),w=Object(h.a)(g,2),S=w[0],y=w[1],k=Object(i.useRef)({activeExercise:-1,count:-1,set:-1});k.current={activeExercise:S.activeExercise,count:1,set:1};var C=Object(i.useState)(0),R=Object(h.a)(C,2),I=R[0],N=R[1],L=Object(i.useState)([]),F=Object(h.a)(L,2),B=F[0],W=F[1];Object(i.useEffect)((function(){if(n&&j.current&&O.current){m.current=O.current.getContext("2d");navigator.mediaDevices.getUserMedia({video:{width:{min:1280},height:{min:720}}}).then((function(e){j.current&&(j.current.srcObject=e),t()}));var e=new x.Pose({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/pose/".concat(e)}});e.setOptions({modelComplexity:1,smoothLandmarks:!0,enableSegmentation:!0,smoothSegmentation:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),e.onResults(D);var t=function(){var n=Object(f.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!j.current){n.next=8;break}if(j.current.videoWidth){n.next=5;break}requestAnimationFrame(t),n.next=8;break;case 5:return n.next=7,e.send({image:j.current});case 7:requestAnimationFrame(t);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()}}),[n]);var D=function(e){if(O.current&&m.current){var t;u(!0),m.current.save(),m.current.clearRect(0,0,O.current.width,O.current.height),m.current.drawImage(e.image,0,0,O.current.width,O.current.height),Object(v.drawConnectors)(m.current,e.poseLandmarks,x.POSE_CONNECTIONS,{color:"#00FF00",lineWidth:4}),Object(v.drawLandmarks)(m.current,e.poseLandmarks,{color:"#FF0000",lineWidth:2}),m.current.restore();var n=e.poseLandmarks;n&&(null===(t=k.current)||void 0===t?void 0:t.activeExercise)>=0&&N(b(n,p[k.current.activeExercise]))}};Object(i.useEffect)((function(){var e=S.direction,t=S.count,n=S.set,r=S.exerciseSelectionIndex,c=S.activeExercise;100===I?0===e&&(t++,e=1):0===I&&1===e&&(e=0);var i=p[c];i&&(t>=i.reps&&0===e&&(r<B.length-1?r++:(n++,r=0),t=0),c=B[r].index,y({direction:e,count:t,set:n,exerciseSelectionIndex:r,activeExercise:c}))}),[I]);var U=S.set,Y=S.count,K=(S.exerciseSelectionIndex,S.activeExercise),M=K>-1;return Object(c.jsxs)(P,{children:[M?Object(c.jsx)(E,{repCompletionPercent:I,exerciseName:p[K].name,set:U,count:Y,resetWorkout:function(){y({direction:0,count:0,set:0,exerciseSelectionIndex:-1,activeExercise:-1})}}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(A,{children:[Object(c.jsxs)(T,{children:["WORKOUT OPTIONS:",p.map((function(e,t){return Object(c.jsx)("div",{onClick:function(){var e=Math.random();W((function(n){return[].concat(Object(d.a)(n),[{workoutKey:e,index:t}])}))},children:e.name},t)}))]}),Object(c.jsxs)(T,{children:["CURRENT SELECTION:",B.map((function(e,t){var n=e.workoutKey,r=e.index;return Object(c.jsx)("div",{onClick:function(){W((function(e){return e.filter((function(e){return e.workoutKey!==n}))}))},children:"".concat(t," - ").concat(p[r].name)},t)}))]})]}),Object(c.jsx)(A,{children:Object(c.jsx)(T,{onClick:function(){B.length&&y({direction:0,count:0,set:0,exerciseSelectionIndex:0,activeExercise:B[0].index})},children:"start"})}),Object(c.jsx)("div",{})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("video",{autoPlay:!0,height:0,width:0,ref:function(e){j.current=e,r(!!e)}}),Object(c.jsx)("canvas",{ref:O,width:window.screen.availWidth*(3/4),height:window.screen.availHeight*(3/4)}),!o&&Object(c.jsx)("div",{className:"message",children:"Loading"})]})]})},P=S.a.div(L()),A=S.a.div(N()),T=S.a.div(I()),B=function(){return Object(c.jsx)(F,{})};var W=function(){return Object(c.jsx)(B,{})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),i(e),s(e)}))};o.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(W,{})}),document.getElementById("root")),D()}},[[34,1,2]]]);
//# sourceMappingURL=main.d856d87b.chunk.js.map