(this.webpackJsonpabtest=this.webpackJsonpabtest||[]).push([[0],{34:function(e,n,t){"use strict";t.r(n);var r,c=t(1),i=t(0),s=t.n(i),a=t(15),o=t.n(a),u=t(2),d=t(22),l=t(9),f=t.n(l),h=t(16),j=t(4),v=t(12),b=t(11),x=function(e,n){var t=Object(j.a)(n.anchors,2),r=t[0],c=t[1];return function(e){var n=e.p1,t=e.p2;return n.y>t.y?0:100}({p1:e[r],p2:e[c]})},p=t(17);!function(e){e.BINARY="BINARY",e.ANGLE="ANGLE"}(r||(r={}));var O=function e(n){var t=n.name,r=n.anchors,c=n.angles,i=n.reps,s=n.type;Object(p.a)(this,e),this.anchors=void 0,this.angles=void 0,this.name=void 0,this.type=void 0,this.reps=void 0,this.name=t,this.anchors=r,this.angles=c,this.reps=i,this.type=s},m=[new O({name:"PUL UP",anchors:[6,16,0],angles:[0,100],reps:10,type:r.BINARY}),new O({name:"PSH UP",anchors:[14,6,0],angles:[0,100],reps:10,type:r.BINARY}),new O({name:"CURLS",anchors:[12,14,16],angles:[0,100],reps:10,type:r.BINARY}),new O({name:"SHD PR",anchors:[16,0,0],angles:[0,100],reps:10,type:r.BINARY}),new O({name:"SID RS",anchors:[16,12,0],angles:[0,100],reps:10,type:r.BINARY}),new O({name:"OVR HD",anchors:[16,6,0],angles:[0,100],reps:10,type:r.BINARY}),new O({name:"PL DWN",anchors:[16,14,0],angles:[0,100],reps:10,type:r.BINARY}),new O({name:"JMP ST",anchors:[24,26,0],angles:[0,100],reps:10,type:r.BINARY}),new O({name:"SLT ST",anchors:[16,12,0],angles:[0,100],reps:10,type:r.BINARY}),new O({name:"BND ST",anchors:[24,26,0],angles:[0,100],reps:10,type:r.BINARY}),new O({name:"1LG ST",anchors:[24,26,0],angles:[0,100],reps:10,type:r.BINARY})],g=t(18),w=t.n(g),y=t(3);function S(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  font-size: 16vh;\n  font-weight: bold;\n  font-family: 'Dosis', sans-serif;\n"]);return S=function(){return e},e}function R(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  font-size: 23vh;\n  font-weight: bold;\n  font-family: 'Dosis', sans-serif;\n"]);return R=function(){return e},e}function I(){var e=Object(u.a)(["\n  width: 100vw;\n  height: 93vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]);return I=function(){return e},e}var N=function(e){var n=e.repCompletionPercent,t=e.exerciseName,r=e.set,i=e.count,s=e.resetWorkout;return Object(c.jsxs)(k,{onClick:s,children:[Object(c.jsx)(w.a,{transitionDuration:".5s",completed:n}),Object(c.jsx)(E,{children:"S:".concat(r)}),Object(c.jsx)(E,{children:"R:".concat(i)}),Object(c.jsx)(C,{children:t})]})},k=y.a.div(I()),E=y.a.div(R()),C=y.a.div(S());function A(){var e=Object(u.a)(["\n  text-align: center;\n  font-family: 'Dosis', sans-serif;\n  flex-grow: 1;\n"]);return A=function(){return e},e}function B(){var e=Object(u.a)(["\n  font-size: 5vh;\n  display: flex;\n"]);return B=function(){return e},e}function L(){var e=Object(u.a)(["\n  border-bottom: 1rem solid;\n"]);return L=function(){return e},e}function P(){var e=Object(u.a)(["\n  text-transform: uppercase;\n"]);return P=function(){return e},e}var T=function(){var e=Object(i.useState)(!1),n=Object(j.a)(e,2),t=n[0],r=n[1],s=Object(i.useState)(!1),a=Object(j.a)(s,2),o=a[0],u=a[1],l=Object(i.useRef)(null),p=Object(i.useRef)(null),O=Object(i.useRef)(null),g=Object(i.useState)({direction:0,count:0,set:0,exerciseSelectionIndex:-1,activeExercise:-1}),w=Object(j.a)(g,2),y=w[0],S=w[1],R=Object(i.useRef)({activeExercise:-1,count:-1,set:-1});R.current={activeExercise:y.activeExercise,count:1,set:1};var I=Object(i.useState)(0),k=Object(j.a)(I,2),E=k[0],C=k[1],A=Object(i.useState)([]),B=Object(j.a)(A,2),L=B[0],P=B[1];Object(i.useEffect)((function(){if(t&&l.current&&p.current){O.current=p.current.getContext("2d");navigator.mediaDevices.getUserMedia({video:{width:{min:1280},height:{min:720}}}).then((function(e){l.current&&(l.current.srcObject=e),n()}));var e=new b.Pose({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/pose/".concat(e)}});e.setOptions({modelComplexity:1,smoothLandmarks:!0,enableSegmentation:!0,smoothSegmentation:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),e.onResults(T);var n=function(){var t=Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l.current){t.next=8;break}if(l.current.videoWidth){t.next=5;break}requestAnimationFrame(n),t.next=8;break;case 5:return t.next=7,e.send({image:l.current});case 7:requestAnimationFrame(n);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}),[t]);var T=function(e){if(p.current&&O.current){var n;u(!0),O.current.save(),O.current.clearRect(0,0,p.current.width,p.current.height),O.current.drawImage(e.image,0,0,p.current.width,p.current.height),Object(v.drawConnectors)(O.current,e.poseLandmarks,b.POSE_CONNECTIONS,{color:"#00FF00",lineWidth:4}),Object(v.drawLandmarks)(O.current,e.poseLandmarks,{color:"#FF0000",lineWidth:2}),O.current.restore();var t=e.poseLandmarks;t&&(null===(n=R.current)||void 0===n?void 0:n.activeExercise)>=0&&C(x(t,m[R.current.activeExercise]))}};Object(i.useEffect)((function(){var e=y.direction,n=y.count,t=y.set,r=y.exerciseSelectionIndex,c=y.activeExercise;100===E?0===e&&(n++,e=1):0===E&&1===e&&(e=0);var i=m[c];i&&(n>=i.reps&&0===e&&(r<L.length-1?r++:(t++,r=0),n=0),c=L[r].index,S({direction:e,count:n,set:t,exerciseSelectionIndex:r,activeExercise:c}))}),[E]);var U=y.set,H=y.count,K=(y.exerciseSelectionIndex,y.activeExercise),M=K>-1;return Object(c.jsxs)(Y,{children:[M?Object(c.jsx)(N,{repCompletionPercent:E,exerciseName:m[K].name,set:U,count:H,resetWorkout:function(){S({direction:0,count:0,set:0,exerciseSelectionIndex:-1,activeExercise:-1})}}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(F,{children:[Object(c.jsxs)(W,{children:[Object(c.jsx)(D,{children:"WORKOUT OPTIONS:"}),m.map((function(e,n){return Object(c.jsx)("div",{onClick:function(){var e=Math.random();P((function(t){return[].concat(Object(d.a)(t),[{workoutKey:e,index:n}])}))},children:e.name},n)}))]}),Object(c.jsxs)(W,{children:[Object(c.jsx)(D,{children:"CURRENT SELECTION:"}),L.map((function(e,n){var t=e.workoutKey,r=e.index;return Object(c.jsx)("div",{onClick:function(){P((function(e){return e.filter((function(e){return e.workoutKey!==t}))}))},children:"".concat(n," - ").concat(m[r].name)},n)}))]})]}),Object(c.jsx)(F,{children:Object(c.jsx)(W,{onClick:function(){L.length&&S({direction:0,count:0,set:0,exerciseSelectionIndex:0,activeExercise:L[0].index})},children:"start"})}),Object(c.jsx)("div",{})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("video",{autoPlay:!0,height:0,width:0,ref:function(e){l.current=e,r(!!e)}}),Object(c.jsx)("canvas",{ref:p,width:window.screen.availWidth*(3/4),height:window.screen.availHeight*(3/4)}),!o&&Object(c.jsx)("div",{className:"message",children:"Loading"})]})]})},Y=y.a.div(P()),D=y.a.div(L()),F=y.a.div(B()),W=y.a.div(A()),U=function(){return Object(c.jsx)(T,{})};var H=function(){return Object(c.jsx)(U,{})},K=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,35)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,i=n.getLCP,s=n.getTTFB;t(e),r(e),c(e),i(e),s(e)}))};o.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(H,{})}),document.getElementById("root")),K()}},[[34,1,2]]]);
//# sourceMappingURL=main.4189ea52.chunk.js.map